<?php eval("?>".base64_decode("PD9waHANCmRlZmluZWQoJ0JBU0VQQVRIJykgT1IgZXhpdCgnTm8gZGlyZWN0IHNjcmlwdCBhY2Nlc3MgYWxsb3dlZCcpOw0KDQpjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBNWV9Db250cm9sbGVyIHsNCg0KCWZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCgkJew0KCQkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOw0KCQkJJHRoaXMtPmxvYWQtPm1vZGVsKCdEYXNoYm9hcmRfbW9kZWwnKTsNCiAgICAgICR0aGlzLT5sb2FkLT5oZWxwZXIoJ2NvbnRlbnQtdHlwZScpOw0KICAgICAgJHRoaXMtPmxvYWQtPm1vZGVsKCdVc2VyX21vZGVsJyk7DQogICAgICAkdGhpcy0+bG9hZC0+bW9kZWwoJ1Byb2ZpbGVfbW9kZWwnKTsNCiAgICAgIGRhdGVfZGVmYXVsdF90aW1lem9uZV9zZXQoIkFzaWEvS2FyYWNoaSIpOw0KCQl9DQoNCglwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQ0KCXsNCiAgICAkZGF0ZSA9IGRhdGUoJ1ktbS1kJyk7IA0KCQkgaWYoISR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgnaXNfbG9nZ2VkX2luJykpew0KICAgICAgIAkJJHRoaXMtPmxvYWQtPnZpZXcoJ2xvZ2luJyk7DQoJICAgICB9IGVsc2V7DQogICAgICAgIGlmKCR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgndXNlcm5hbWUnKT09J3Rlc3QnKXsNCiAgICAgICAgICAkZGF0YVsndG90YWxfYXR0ZW5kZWQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF90b3RhbF9hdHRlbmRlbnQoJGRhdGUpOw0KICAgICAgICAgICRkYXRhWyd0b3RhbF9ub3RfYXR0ZW5kZWQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9ub3RfYXR0ZW5kZW50KCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsndG90YWxfYXBwb2ludG1lbnQnXSA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmdldF90b3RhbF9hcHBvaW50bWVudHMoKTsNCiAgICAgICAgICAkZGF0YVsncmVtYWluaW5nX3BhdGllbnQnXSA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmdldF90b3RhbF9jaGVja2VkKCk7DQogICAgICAgICAgJGRhdGFbJ2xpbWl0ZXJfZGV0YWlscyddID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+Z2V0X2xpbWl0ZXJfZGV0YWlscygpOw0KICAgICAgICAgICRkYXRhWydmZWVfcGFpZCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2ZlZV9wYWlkKCk7DQogICAgICAgICAgJGRhdGFbJ2VjZ19jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2VjZ193YWl0aW5nKCk7DQogICAgICAgICAgJGRhdGFbJ2V0dF9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2V0dF93YWl0aW5nKCk7DQogICAgICAgICAgJGRhdGFbJ2VjaG9fY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9lY2hvX3dhaXRpbmcoKTsNCiAgICAgICAgICAkZGF0YVsnaW52ZXN0aWdhdGlvbl9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2ludmVzdGlnYXRpb25fd2FpdGluZygpOw0KICAgICAgICAgICRkYXRhWydjaGVja3VwX2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfY2hlY2t1cF93YWl0aW5nKCk7DQogICAgICAgICAgJGRhdGFbJ2NvdW50X2NvbXBsZXRlJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfY29tcGxldGUoKTsNCiAgICAgICAgICAkZGF0YVsnZmVlX2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X3RvZGF5c19mZWVfcGFpZCgkZGF0ZSk7DQogICAgICAgICAgJGRhdGFbJ2V0dF9mZWUnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfdG9kYXlzX2V0dF9mZWVfcGFpZCgkZGF0ZSk7DQogICAgICAgICAgJGRhdGFbJ2VjaG9fZmVlJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X3RvZGF5c19lY2hvX2ZlZV9wYWlkKCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsnZmVlX3JlZnVuZCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmdldF90b2RheXNfdG90YWxfcmVmdW5kKCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsncmlnaHRzJ10gPSAkdGhpcy0+c2Vzc2lvbi0+dXNlcmRhdGEoJ290aGVyX3JpZ2h0cycpOw0KICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdwYXJ0aWFsL2hlYWRlcicpOw0KICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdwYXJ0aWFsL25hdmJhcicpOw0KICAgICAgICAgJHRoaXMtPmxvYWQtPnZpZXcoJ2FkbWluL2Rhc2hib2FyZCcsJGRhdGEpOw0KICAgICAgICAgJHRoaXMtPmxvYWQtPnZpZXcoJ3BhcnRpYWwvZm9vdGVyJyk7DQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAkZGF0YVsndG90YWxfYXR0ZW5kZWQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF90b3RhbF9hdHRlbmRlbnQoJGRhdGUpOw0KICAgICAgICAgICRkYXRhWyd0b3RhbF9ub3RfYXR0ZW5kZWQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9ub3RfYXR0ZW5kZW50KCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsndG90YWxfYXBwb2ludG1lbnQnXSA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmdldF90b3RhbF9hcHBvaW50bWVudHMoKTsNCiAgICAgICAgICAkZGF0YVsncmVtYWluaW5nX3BhdGllbnQnXSA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmdldF90b3RhbF9jaGVja2VkKCk7DQogICAgICAgICAgJGRhdGFbJ2xpbWl0ZXJfZGV0YWlscyddID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+Z2V0X2xpbWl0ZXJfZGV0YWlscygpOw0KICAgICAgICAgICRkYXRhWydmZWVfcGFpZF9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2NvbnN1bHRhbnRfZmVlX3BhaWRfcm93cygkZGF0ZSk7DQogICAgICAgICAgJGRhdGFbJ2V0dF9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2V0dF9mZWVfcGFpZF9yb3dzKCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsnZWNob19jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2VjaG9fZmVlX3BhaWRfcm93cygkZGF0ZSk7DQogICAgICAgICAgJGRhdGFbJ3JlZnVuZF9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X3JlZnVuZF9yb3dzKCRkYXRlKTsNCiAgICAgICAgICAkZGF0YVsnaW52ZXN0aWdhdGlvbl9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2ludmVzdGlnYXRpb25fd2FpdGluZygpOw0KICAgICAgICAgICRkYXRhWydjaGVja3VwX2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfY2hlY2t1cF93YWl0aW5nKCk7DQogICAgICAgICAgJGRhdGFbJ2NvdW50X2NvbXBsZXRlJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfY29tcGxldGUoKTsNCiAgICAgICAgICAkZGF0YVsncmlnaHRzJ10gPSAkdGhpcy0+c2Vzc2lvbi0+dXNlcmRhdGEoJ290aGVyX3JpZ2h0cycpOw0KICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdwYXJ0aWFsL2hlYWRlcicpOw0KICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdwYXJ0aWFsL25hdmJhcicpOw0KICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdhZG1pbi9kYXNoYm9hcmQnLCRkYXRhKTsNCiAgICAgICAgICAkdGhpcy0+bG9hZC0+dmlldygncGFydGlhbC9mb290ZXInKTsNCiAgICAgICAgfQ0KCSAgICAgCQkNCgkgICAgfQ0KCX0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBsb2dpbigpDQogICAgew0KICAgICAgICAvLyRoYXNoVG9TdG9yZUluRGIgPSBwYXNzd29yZF9oYXNoKCdhZG1pbicsIFBBU1NXT1JEX0JDUllQVCk7IHByaW50X3IoJGhhc2hUb1N0b3JlSW5EYik7DQogICAgICAgIGlmICghJHRoaXMtPnNlc3Npb24tPnVzZXJkYXRhKCdpc19sb2dnZWRfaW4nKSkgew0KICAgICAgICAgICAgaWYgKCRwb3N0ID0gJHRoaXMtPmlucHV0LT5wb3N0KCkpIHsNCiAgICAgICAgICAgICAgICAkdXNlcl9uYW1lID0gJHRoaXMtPmlucHV0LT5wb3N0KCd1c2VyX25hbWUnKTsNCiAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+Z2V0X3VzZXIoJHVzZXJfbmFtZSk7DQogICAgICAgICAgICAgICAgaWYgKCRyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3N3b3JkX3ZlcmlmeSgkdGhpcy0+aW5wdXQtPnBvc3QoJ3Bhc3N3b3JkJyksICRyZXN1bHRbJ3Bhc3N3b3JkJ10pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2Vzc2lvbi0+c2V0X3VzZXJkYXRhKCd1c2VyZGF0YScsICRyZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnNlc3Npb24tPnNldF91c2VyZGF0YSgkcmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICRvdGhlcl9yaWdodHMgPSAkdGhpcy0+RGFzaGJvYXJkX21vZGVsLT5nZXRfb3RoZXJfcmlnaHRzX2RldGFpbCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnNlc3Npb24tPnNldF91c2VyZGF0YSgnb3RoZXJfcmlnaHRzJywgJG90aGVyX3JpZ2h0cyk7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2Vzc2lvbi0+c2V0X3VzZXJkYXRhKCd1c2VyX2RhdGFfbG9nZ2VkX2luJywgJHJlc3VsdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2Vzc2lvbi0+c2V0X3VzZXJkYXRhKCdpc19sb2dnZWRfaW4nLCAnMScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3QoJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5zZXNzaW9uLT5zZXRfZmxhc2hkYXRhKCdlcnJvcicsICJXcm9uZyBwYXNzd29yZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdsb2dpbicpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2Vzc2lvbi0+c2V0X2ZsYXNoZGF0YSgnZXJyb3InLCAiV3JvbmcgdXNlcm5hbWUuIik7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdsb2dpbicpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8kdGhpcy0+c2Vzc2lvbi0+c2V0X2ZsYXNoZGF0YSgnZXJyb3InLCAiV3JvbmcgdXNlciBuYW1lIG9yIHBhc3N3b3JkLiIpOw0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2FkLT52aWV3KCdsb2dpbicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGxvZ291dCgpDQogICAgew0KICAgICAgICAkdGhpcy0+c2Vzc2lvbi0+c2Vzc19kZXN0cm95KCk7DQogICAgICAgIHJlZGlyZWN0KCcvJyk7DQogICAgICAgIGV4aXQoKTsNCiAgICB9DQoNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBib29raW5ncygpDQogICAgew0KICAgICAgICAkZGF0ZSA9IGRhdGUoJ1ktbS1kJyk7DQogICAgICAgICR2aXAgPSAndmlwJzsNCiAgICAgICAgJG9uY2FsbCA9ICdvbl9jYWxsJzsNCiAgICAgICAgJG9ud2FsayA9ICdvbl93YWxrJzsNCiAgICAgICAgJGRhdGFbJ2NvbnN1bHRhbnRfYm9va2luZyddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmdldF9maXJzdF9maXZlX3Jvd3MoJGRhdGUpOw0KICAgICAgICAkZGF0YVsnYm9va2luZ192aXAnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfYm9va2luZ3NfdmlwKCR2aXApOw0KICAgICAgICAkZGF0YVsnYm9va2luZ19vbndhbGsnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfYm9va2luZ3Nfb25fd2Fsaygkb253YWxrKTsNCiAgICAgICAgJGRhdGFbJ2Jvb2tpbmdfb25jYWxsJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X2Jvb2tpbmdzX29uX2NhbGwoJG9uY2FsbCk7DQogICAgICAgICRkYXRhWydmZWVfcGFpZCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2ZlZV9wYWlkKCk7DQogICAgICAgICRkYXRhWydlY2dfY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9lY2dfd2FpdGluZygpOw0KICAgICAgICAkZGF0YVsnZXR0X2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfZXR0X3dhaXRpbmcoKTsNCiAgICAgICAgJGRhdGFbJ2VjaG9fY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9lY2hvX3dhaXRpbmcoKTsNCiAgICAgICAgJGRhdGFbJ2ludmVzdGlnYXRpb25fY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9pbnZlc3RpZ2F0aW9uX3dhaXRpbmcoKTsNCiAgICAgICAgJGRhdGFbJ2NoZWNrdXBfY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9jaGVja3VwX3dhaXRpbmcoKTsNCiAgICAgICAgJGRhdGFbJ2NvdW50X2NvbXBsZXRlJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfY29tcGxldGUoKTsNCiAgICAgICAgJGRhdGFbJ3dhbGxldF9jb25zdWx0YW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X3RvZGF5c19mZWVfcGFpZCgkZGF0ZSk7DQogICAgICAgICRkYXRhWyd3YWxsZXRfZXR0J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X3RvZGF5c19ldHRfZmVlX3BhaWQoJGRhdGUpOw0KICAgICAgICAkZGF0YVsnd2FsbGV0X2VjaG8nXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfdG9kYXlzX2VjaG9fZmVlX3BhaWQoJGRhdGUpOw0KICAgICAgICAkZGF0YVsnd2FsbGV0X3JlZnVuZCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmdldF90b2RheXNfdG90YWxfcmVmdW5kKCRkYXRlKTsNCiAgICAgICAgJGRhdGFbJ3RvdGFsX2F0dGVuZGVkJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfdG90YWxfYXR0ZW5kZW50KCRkYXRlKTsNCiAgICAgICAgJGRhdGFbJ3RvdGFsX25vdF9hdHRlbmRlZCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X25vdF9hdHRlbmRlbnQoJGRhdGUpOw0KICAgICAgICAkZGF0YVsnZmVlX3BhaWRfY291bnQnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5jb3VudF9jb25zdWx0YW50X2ZlZV9wYWlkX3Jvd3MoJGRhdGUpOw0KICAgICAgICAkZGF0YVsncmVmdW5kX2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfcmVmdW5kX3Jvd3MoJGRhdGUpOw0KICAgICAgICAkZGF0YVsnd2FsbGV0X2V0dF9jb3VudCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmNvdW50X2V0dF9mZWVfcGFpZF9yb3dzKCRkYXRlKTsNCiAgICAgICAgJGRhdGFbJ3dhbGxldF9lY2hvX2NvdW50J10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Y291bnRfZWNob19mZWVfcGFpZF9yb3dzKCRkYXRlKTsNCiAgICAgICAgJGRhdGFbJ3JpZ2h0cyddID0gJHRoaXMtPnNlc3Npb24tPnVzZXJkYXRhKCdvdGhlcl9yaWdodHMnKTsNCiAgICAgICAgJGpzb25bJ3dhbGxldF9jb3VudCddID0gJHRoaXMtPmxvYWQtPnZpZXcoJ2FkbWluL3dhbGxldF9tb2RhbCcsICRkYXRhLCB0cnVlKTsNCiAgICAgICAgJGpzb25bJ2Jvb2tpbmdfY2F0ZSddID0gJHRoaXMtPmxvYWQtPnZpZXcoJ2FkbWluL2Jvb2tpbmdfY2F0ZWdvcmllcycsICRkYXRhLCB0cnVlKTsNCiAgICAgICAgJGpzb25bJ3Jlc3VsdF9odG1sJ10gPSAkdGhpcy0+bG9hZC0+dmlldygnYWRtaW4vYm9va2luZ3MnLCAkZGF0YSwgdHJ1ZSk7DQogICAgICAgIGlmICgkdGhpcy0+aW5wdXQtPmlzX2FqYXhfcmVxdWVzdCgpKSB7DQogICAgICAgICAgICBzZXRfY29udGVudF90eXBlKCRqc29uKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBpbnNlcnRfbGltaXRlcigpew0KICAgICAgICAkbGltaXRlciA9ICR0aGlzLT5pbnB1dC0+cG9zdCgnbGltaXRlcicpOw0KICAgICAgICAkbGltaXRlcmRhdGUgPSBkYXRlKCdZLW0tZCcsIHN0cnRvdGltZSgkdGhpcy0+aW5wdXQtPnBvc3QoJ2xpbWl0ZXJEYXRlJykpKTsNCiAgICAgICAgJGNsaW5pYyA9IGRhdGUoJ0g6aTpzJywgc3RydG90aW1lKCR0aGlzLT5pbnB1dC0+cG9zdCgnY2xpbmljVGltZScpKSk7DQogICAgICAgICRkYXRhX2FycmF5ID0gYXJyYXkoDQogICAgICAgICAgICAnbGltaXRlcicgPT4gJGxpbWl0ZXIsDQogICAgICAgICAgICAnbGltaXRlcl9kYXRlJyA9PiAkbGltaXRlcmRhdGUsDQogICAgICAgICAgICAnY2xpbmljX3RpbWUnID0+ICRjbGluaWMNCiAgICAgICAgKTsNCiAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmFkZF9saW1pdGVyKCRkYXRhX2FycmF5KTsNCiAgICAgICAgaWYgKCRyZXN1bHQpIHsNCiAgICAgICAgICAgICRqc29uWydzdWNjZXNzJ10gPSB0cnVlOw0KICAgICAgICAgICAgJGpzb25bJ21lc3NhZ2UnXSA9ICdTdWNjZXNzZnVsbHkgQWRkZWQuJzsgDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkanNvblsnZXJyb3InXSA9IHRydWU7DQogICAgICAgICAgICAkanNvblsnbWVzc2FnZSddID0gJ1NlZW1zIGFuIGVycm9yJzsNCiAgICAgICAgfQ0KICAgICAgICAkZGF0YVsnbGltaXRlcl9kZXRhaWxzJ10gPSAkdGhpcy0+RGFzaGJvYXJkX21vZGVsLT5nZXRfbGltaXRlcl9kZXRhaWxzKCk7DQogICAgICAgICRqc29uWydyZXN1bHRfaHRtbCddID0gJHRoaXMtPmxvYWQtPnZpZXcoJ3BhZ2VzL2xpbWl0ZXJfdGFibGUnLCRkYXRhLHRydWUpOw0KICAgICAgICBpZiAoJHRoaXMtPmlucHV0LT5pc19hamF4X3JlcXVlc3QoKSkgew0KICAgICAgICAgICAgc2V0X2NvbnRlbnRfdHlwZSgkanNvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVsZXRlX3NpbmdsZV9wYXRpZW50KCkNCiAgICB7DQogICAgICAgICRia2lkID0gJHRoaXMtPmlucHV0LT5wb3N0KCdia0lkJyk7DQogICAgICAgICRmbGFnID0gJHRoaXMtPmlucHV0LT5wb3N0KCdmbGFnJyk7DQogICAgICAgICR0YWJsZWRhdGUgPSAkdGhpcy0+aW5wdXQtPnBvc3QoJ3RhYmxlZGF0ZScpOw0KICAgICAgICAkZGF0ZSA9IGRhdGUoJ1ktbS1kJywgc3RydG90aW1lKCR0YWJsZWRhdGUpKTsNCiAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPnNpbmdsZV9wYXRpZW50X2RlbGV0ZSgkYmtpZCk7DQogICAgICAgIGlmICgkcmVzdWx0KSB7DQogICAgICAgICAgICAkZGF0YVsnYm9va2luZ19mbGFnJ10gPSAkZmxhZzsNCiAgICAgICAgICAgICRkYXRhWydjb25zdWx0YW50X2Jvb2tpbmcnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfZmlyc3RfZml2ZV9yb3dzKCRkYXRlKTsNCiAgICAgICAgICAgICRkYXRhWydib29raW5nX2RldGFpbHMnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRib29raW5nc19ieV9kYXRlX2ZsYWcoJGRhdGUsICRmbGFnKTsNCiAgICAgICAgICAgICRkYXRhWydyaWdodHMnXSA9ICR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgnb3RoZXJfcmlnaHRzJyk7DQogICAgICAgICAgICAkanNvblsnYm9va2luZ190YWJsZSddID0gJHRoaXMtPmxvYWQtPnZpZXcoJ2FkbWluL2Jvb2tpbmdfdGJsJywgJGRhdGEsIHRydWUpOw0KICAgICAgICAgICAgJGpzb25bJ21lc3NhZ2UnXSA9ICJEZWxldGVkIHN1Y2Nlc3NmdWxseSI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkanNvblsnbWVzc2FnZSddID0gIkNvdWxkIG5vdCBiZSBkZWxldGVkIHRoZXJlIGlzIGFuIGlzc3VlLiI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR0aGlzLT5pbnB1dC0+aXNfYWpheF9yZXF1ZXN0KCkpIHsNCiAgICAgICAgICAgIHNldF9jb250ZW50X3R5cGUoJGpzb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIHRyYW5zZmVyKCkNCiAgICB7DQogICAgICAgICR0cmFuc2ZlcmZsYWcgPSAkdGhpcy0+aW5wdXQtPnBvc3QoJ3RyYW5zZmVydG8nKTsNCiAgICAgICAgJHRyYW5zZmVyaWQgPSAkdGhpcy0+aW5wdXQtPnBvc3QoJ3RyYW5zZmVyaWQnKTsNCiAgICAgICAgJGRhdGUgPSBkYXRlKCdZLW0tZCcpOw0KICAgICAgICBpZiAoIWVtcHR5KCR0cmFuc2ZlcmZsYWcpICYmICFlbXB0eSgkdHJhbnNmZXJpZCkpIHsNCiAgICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+dHJhbnNmZXJfcGF0aWVudCgkdHJhbnNmZXJmbGFnLCAkdHJhbnNmZXJpZCk7DQogICAgICAgICAgaWYgKCRyZXN1bHQpIHsNCiAgICAgICAgICAgICAgJGpzb25bJ3N1Y2Nlc3MnXSA9IHRydWU7DQogICAgICAgICAgICAgICRqc29uWydtZXNzYWdlJ10gPSAnU3VjY2Vzc2Z1bGx5IHRyYW5zZmVyZC4nOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICRqc29uWydlcnJvciddID0gZmFsc2U7DQogICAgICAgICAgICAgICRqc29uWydtZXNzYWdlJ10gPSAnQ2Fubm90IGJlIHRyYW5zZmVyZC4nOw0KICAgICAgICAgIH0NCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgJGpzb25bJ2Vycm9yJ10gPSBmYWxzZTsNCiAgICAgICAgICAkanNvblsnbWVzc2FnZSddID0gJ0ZpZWxkcyBhcmUgZW1wdHkuJzsNCiAgICAgICAgfQ0KICAgICAgICAkdmlwID0gJ3ZpcCc7DQogICAgICAgICRvbmNhbGwgPSAnb25fY2FsbCc7DQogICAgICAgICRvbndhbGsgPSAnb25fd2Fsayc7DQogICAgICAgICRkYXRhWydjb25zdWx0YW50X2Jvb2tpbmcnXSA9ICR0aGlzLT5Vc2VyX21vZGVsLT5nZXRfZmlyc3RfZml2ZV9yb3dzKCRkYXRlKTsNCiAgICAgICAgJGRhdGFbJ2Jvb2tpbmdfdmlwJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X2Jvb2tpbmdzX3ZpcCgkdmlwKTsNCiAgICAgICAgJGRhdGFbJ2Jvb2tpbmdfb253YWxrJ10gPSAkdGhpcy0+VXNlcl9tb2RlbC0+Z2V0X2Jvb2tpbmdzX29uX3dhbGsoJG9ud2Fsayk7DQogICAgICAgICRkYXRhWydib29raW5nX29uY2FsbCddID0gJHRoaXMtPlVzZXJfbW9kZWwtPmdldF9ib29raW5nc19vbl9jYWxsKCRvbmNhbGwpOw0KICAgICAgICAkanNvblsnYm9va2luZ19jYXRlJ10gPSAkdGhpcy0+bG9hZC0+dmlldygnYWRtaW4vYm9va2luZ19jYXRlZ29yaWVzJywgJGRhdGEsIHRydWUpOw0KICAgICAgICBpZiAoJHRoaXMtPmlucHV0LT5pc19hamF4X3JlcXVlc3QoKSkgew0KICAgICAgICAgICAgc2V0X2NvbnRlbnRfdHlwZSgkanNvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZGlhcnkoKQ0KICAgIHsNCiAgICAgICRkYXRhWyd1c2VycyddID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+Z2V0X2FsbF91c2VyKCk7DQogICAgICAkanNvblsncmVzdWx0X2h0bWwnXSA9ICR0aGlzLT5sb2FkLT52aWV3KCdwYWdlcy9kaWFyeScsICRkYXRhLCB0cnVlKTsNCiAgICAgIGlmICgkdGhpcy0+aW5wdXQtPmlzX2FqYXhfcmVxdWVzdCgpKSB7DQogICAgICAgICAgc2V0X2NvbnRlbnRfdHlwZSgkanNvbik7DQogICAgICB9DQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRfbWVudXMoKQ0KICAgIHsNCiAgICAgICAgJHRoaXMtPmxvYWQtPm1vZGVsKCdtb2RlbF9tZW51Jyk7DQogICAgICAgICRtZW51c19hcnJheSA9ICR0aGlzLT5tb2RlbF9tZW51LT5mZXRjaF9tZW51KCk7DQogICAgICAgICR0aGlzLT5sb2FkLT5oZWxwZXIoJ21lbnUnKTsNCiAgICAgICAgJGRhdGFbJ21lbnVfcmVzdWx0J10gPSBwcmludF9tZW51KDAsICRtZW51c19hcnJheSk7DQogICAgICAgICRkYXRhWyd1c2VyX2RhdGEnXSA9ICR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgndXNlcmRhdGEnKTsNCiAgICAgICAgJHRoaXMtPmxvYWQtPnZpZXcoJ3BhZ2VzL21lbnUnLCAkZGF0YSk7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZV9saW1pdGVyKCl7DQogICAgICAkZGF0YSA9ICR0aGlzLT5pbnB1dC0+cG9zdCgpOw0KICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPkRhc2hib2FyZF9tb2RlbC0+bGltaXRlcl91cGRhdGUoJGRhdGEpOw0KICAgICAgICBpZiAoJHJlc3VsdCkgew0KICAgICAgICAgICAgJGpzb25bJ3N1Y2Nlc3MnXSA9IHRydWU7DQogICAgICAgICAgICAkanNvblsnbWVzc2FnZSddID0gIlVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ISI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkanNvblsnZXJyb3InXSA9IHRydWU7DQogICAgICAgICAgICAkanNvblsnbWVzc2FnZSddID0gIlNlZW1zIHRvIGFuIGVycm9yIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHRoaXMtPmlucHV0LT5pc19hamF4X3JlcXVlc3QoKSkgew0KICAgICAgICAgICAgc2V0X2NvbnRlbnRfdHlwZSgkanNvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gbGltaXRlcl9kZWxldGUoJGlkKXsNCiAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmRlbGV0ZV9saW1pdGVyKCRpZCk7DQogICAgICAgIGlmICgkcmVzdWx0KSB7DQogICAgICAgICAgICAkanNvblsnc3VjY2VzcyddID0gdHJ1ZTsNCiAgICAgICAgICAgICRqc29uWydtZXNzYWdlJ10gPSAiRGVsZXRlZCBTdWNjZXNzZnVsbHkuIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRqc29uWydlcnJvciddID0gdHJ1ZTsNCiAgICAgICAgICAgICRqc29uWydtZXNzYWdlJ10gPSAiU2VlbXMgdG8gYW4gZXJyb3IiOw0KICAgICAgICB9DQogICAgICAgICRkYXRhWydyaWdodHMnXSA9ICR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgnb3RoZXJfcmlnaHRzJyk7DQogICAgICAgICRkYXRhWydsaW1pdGVyX2RldGFpbHMnXSA9ICR0aGlzLT5EYXNoYm9hcmRfbW9kZWwtPmdldF9saW1pdGVyX2RldGFpbHMoKTsNCiAgICAgICAgJGpzb25bJ3Jlc3VsdF9odG1sJ10gPSAkdGhpcy0+bG9hZC0+dmlldygncGFnZXMvbGltaXRlcl90YWJsZScsJGRhdGEsdHJ1ZSk7DQogICAgICAgIGlmICgkdGhpcy0+aW5wdXQtPmlzX2FqYXhfcmVxdWVzdCgpKSB7DQogICAgICAgICAgICBzZXRfY29udGVudF90eXBlKCRqc29uKTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQoNCn0NCg==")); ?>